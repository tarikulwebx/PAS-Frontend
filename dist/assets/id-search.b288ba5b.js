import{H as u}from"./HeaderComponent.9dd6a45a.js";import{n as r,g as d,s as i}from"./index.a58d896b.js";import{C as h}from"./CustomerDetailsComponent.c9b94975.js";var _=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"buttons"},[t("b-button",{staticClass:"capture-btn",on:{click:e.goSearchByOCR}},[t("b-icon",{attrs:{icon:"camera"}}),t("span",{staticClass:"btn-text"},[e._v("\u64AE\u5F71\u691C\u7D22")])],1)],1)},m=[];const v={props:["userSelected"],methods:{goSearchByOCR(){this.$store.dispatch("global/setSearchBy","ocr"),this.$router.push("/capture-ocr-image")}}},o={};var f=r(v,_,m,!1,g,"b6b6f72c",null,null);function g(e){for(let s in o)this[s]=o[s]}var p=function(){return f.exports}(),b=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"customer-list"}},[e.customer.CustomerID?t("div",{staticClass:"search-result",on:{click:function(a){e.isComponentModalActive=!0}}},[t("b-field",[t("b-radio-button",{attrs:{"native-value":e.customer.CustomerID},model:{value:e.customerSelected,callback:function(a){e.customerSelected=a},expression:"customerSelected"}},[t("span",{staticClass:"id"},[e._v("ID "),t("strong",[e._v(e._s(e.customer.CustomerID))])]),t("span",{staticClass:"company"},[e._v("\u5951\u7D04\u6CD5\u4EBA\u540D "),t("strong",[e._v(e._s(e.customer.CompanyName1))])]),t("span",{staticClass:"name"},[e._v(" \u6CD5\u4EBA\u4EE3\u8868\u8005\u540D/\u62C5\u5F53\u8005\u540D "),t("strong",[e._v(e._s(e.customer.CompanyName2))])]),t("span",{staticClass:"name-bill-to"},[e._v("\u5C4B\u53F7\uFF08\u500B\u4EBA\uFF09"),t("strong",[e._v(e._s(e.customer.NameBillTo))])]),t("span",{staticClass:"contact"},[e._v("\u5951\u7D04\u8005\u540D\uFF08\u500B\u4EBA\uFF09"),t("strong",[e._v(e._s(e.customer.concat_Name_person))])])])],1)],1):e._e(),t("b-modal",{attrs:{width:300,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-label":"Example Modal","close-button-aria-label":"Close",animation:"slide-fade-down","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("customer-details-component-vue",{attrs:{customer:e.customer},on:{close:a.close}})]}}]),model:{value:e.isComponentModalActive,callback:function(a){e.isComponentModalActive=a},expression:"isComponentModalActive"}})],1)},C=[];const S={props:["customer"],components:{CustomerDetailsComponentVue:h},data(){return{isComponentModalActive:!1,customerSelected:!1}}},l={};var y=r(S,b,C,!1,D,"2e4407c7",null,null);function D(e){for(let s in l)this[s]=l[s]}var x=function(){return y.exports}(),$=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"id_search"}},[t("head-component",{attrs:{backBtnTxt:e.backBtnTxt,title:"ID\u691C\u7D22\u3067\u767B\u9332",prevPage:e.isSearched?"/search-by-id":"/"},on:{searchAgain:e.searchAgain}}),t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"input-field"},[t("b-field",{attrs:{message:e.errorMsg,type:"is-danger"}},[t("b-numberinput",{attrs:{placeholder:"ID\u3092\u5165\u529B\u3057\u3066\u691C\u7D22",type:"search",icon:"magnify"},on:{input:e.getValue},model:{value:e.id_number,callback:function(a){e.id_number=a},expression:"id_number"}})],1)],1),t("div",{staticClass:"search"},[e.showWithdrawal?t("div",{staticClass:"swtich"},[t("span",{class:e.DeleteFlag?"color-text":"gray-text"},[e._v("\u89E3\u7D04\u8005\u3092\u542B\u3080")]),t("b-field",[t("b-switch",{attrs:{type:"is-danger"},on:{input:e.filterByDeleteFlag},model:{value:e.DeleteFlag,callback:function(a){e.DeleteFlag=a},expression:"DeleteFlag"}})],1)],1):e._e(),!e.hasSearchResult&&e.isSearched||e.customers.length<1&&e.isSearched?t("div",{staticClass:"search-not-found"},[t("span",[e._v("[ ID "+e._s(e.searched_id)+" ] \u306F "),t("br"),e._v(" \u307F\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F")])]):e._e(),e.customers.length>0?t("div",{staticClass:"customers-list"},e._l(e.customers,function(a,c){return t("div",{key:c},[t("customer-list-component",{attrs:{customer:a}})],1)}),0):e._e()]),e.customers.length==0&&!e.isSearched?t("div",{staticClass:"buttons"},[t("b-button",{class:e.id_number?"btn-orange":"btn-gray",attrs:{expanded:"",disabled:!e.id_number},on:{click:e.onSubmit}},[e._v("ID\u3067\u691C\u7D22\u3059\u308B")])],1):e._e(),e.customers.length==0&&e.isSearched?t("div",{staticClass:"buttons"},[t("b-button",{class:e.id_number?"btn-orange":"btn-gray",attrs:{expanded:"",disabled:!e.id_number},on:{click:e.reSearch}},[e._v("ID\u3092\u5165\u529B\u3057\u76F4\u3059")])],1):e._e()]),t("b-loading",{attrs:{"is-full-page":e.isFullPage,"can-cancel":!1},model:{value:e.isLoading,callback:function(a){e.isLoading=a},expression:"isLoading"}}),t("floating-button",{staticClass:"floating-btn"})],1)},F=[];const w={components:{HeadComponent:u,FloatingButton:p,CustomerListComponent:x},data(){return{DeleteFlag:!1,isSearched:!1,id_number:null,showWithdrawal:!1,radioButton:"",customers:[],totalCustomers:[],backBtnTxt:"",isFullPage:!0,isLoading:!1,searched_id:"",isComponentModalActive:!1,hasSearchResult:!1,errorMsg:""}},mounted(){this.$store.state.global.userSelections&&this.$store.state.global.userSelections.customer&&(this.customers.push(this.$store.state.global.userSelections.customer),this.totalCustomers.push(this.$store.state.global.userSelections.customer),this.filterByDeleteFlag())},methods:{getValue(e){e===null?this.errorMsg="ID\u306F\u6570\u5024\u306E\u307F\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002":this.errorMsg=""},filterByDeleteFlag(){if(this.DeleteFlag){let e=this.totalCustomers.filter(s=>s.DeleteFlag===1||s.DeleteFlag===0);this.customers=e}else this.customers=this.totalCustomers.filter(e=>e.DeleteFlag===0)},onSubmit(){if(this.id_number){let e={id:this.id_number,ContractStore:parseInt(d())};e.ContractStore?(this.backBtnTxt="ID\u5165\u529B",this.isLoading=!0,this.$store.dispatch("global/setSearchedId",e),this.$store.dispatch("customer/getCustomerByID",e).then(s=>{this.searched_id=this.id_number,s.length>0?(this.customers=s,this.totalCustomers=s,this.filterByDeleteFlag(),this.isLoading=!1,this.isSearched=!0,this.showWithdrawal=!0,this.hasSearchResult=!0):(this.isLoading=!1,this.isSearched=!0,this.showWithdrawal=!0,this.hasSearchResult=!1)}).catch(s=>{this.isSearched=!0,this.showWithdrawal=!0,this.hasSearchResult=!1,this.searched_id=this.id_number,this.isLoading=!1})):i("\u521D\u671F\u8A2D\u5B9A\u753B\u9762\u3078\u623B\u308A\u3001\u62E0\u70B9\u3092\u9078\u629E\u3057\u306A\u304A\u3057\u3066\u304F\u3060\u3055\u3044\u3002","is-danger")}else this.isLoading=!1,i("ID\u306F\u5FC5\u9808\u3067\u3059\u3002","is-danger")},searchAgain(){this.isSearched=!1,this.showWithdrawal=!1,this.customers=[],this.totalCustomers=[],this.DeleteFlag=!1,this.hasSearchResult=!1,this.backBtnTxt=""},reSearch(){this.isSearched=!1,this.showWithdrawal=!1,this.customers=[],this.totalCustomers=[],this.id_number=null,this.DeleteFlag=!1,this.hasSearchResult=!1,this.backBtnTxt=""}}},n={};var B=r(w,$,F,!1,k,"7996aabf",null,null);function k(e){for(let s in n)this[s]=n[s]}var L=function(){return B.exports}();export{L as default};
