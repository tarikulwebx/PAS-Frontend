import{H as _}from"./HeaderComponent.9dd6a45a.js";import{n,s as r}from"./index.a58d896b.js";import{C as v}from"./CustomerDetailsComponent.c9b94975.js";import{c as C}from"./Camera.7ee90011.js";var f=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"customer-list"}},[e.customer.CustomerID?t("div",{staticClass:"search-result",on:{click:function(o){e.isComponentModalActive=!0}}},[t("b-field",[t("b-radio-button",{attrs:{"native-value":e.customer.CustomerID},model:{value:e.customerSelected,callback:function(o){e.customerSelected=o},expression:"customerSelected"}},[t("span",{staticClass:"id"},[t("span",{staticClass:"lbl"},[e._v("ID")]),e._v(" "),t("strong",[e._v(e._s(e.customer.CustomerID))])]),e.customer.max_score==2?t("span",{staticClass:"name-bill-to"},[t("span",{staticClass:"lbl"},[e._v("\u5C4B\u53F7 ")]),t("strong",[e._v(e._s(e.customer.NameBillTo?e.customer.NameBillTo:"N/A"))])]):e._e(),e.customer.max_score==2?t("span",{staticClass:"contact"},[t("span",{staticClass:"lbl"},[e._v("\u5951\u7D04\u8005\u540D\uFF08\u500B\u4EBA\uFF09")]),e._v(" "),t("strong",[e._v(e._s(e.customer.concat_Name_person?e.customer.concat_Name_person:"N/A"))])]):e._e(),e.customer.max_score==1?t("span",{staticClass:"name"},[t("span",{staticClass:"lbl"},[e._v("\u5951\u7D04\u6CD5\u4EBA\u540D ")]),e._v(" "),t("strong",[e._v(e._s(e.customer.CompanyName1?e.customer.CompanyName1:"N/A"))])]):e._e(),e.customer.max_score==1?t("span",{staticClass:"company"},[t("span",{staticClass:"lbl"},[e._v("\u6CD5\u4EBA\u4EE3\u8868\u8005\u540D/\u62C5\u5F53\u8005\u540D ")]),e._v(" "),t("strong",[e._v(e._s(e.customer.CompanyName2?e.customer.CompanyName2:"N/A"))])]):e._e()])],1)],1):e._e(),t("b-modal",{attrs:{width:300,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-label":"Example Modal","close-button-aria-label":"Close",animation:"slide-fade-down","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(o){return[t("customer-details-component-vue",{attrs:{customer:e.customer},on:{close:o.close}})]}}]),model:{value:e.isComponentModalActive,callback:function(o){e.isComponentModalActive=o},expression:"isComponentModalActive"}})],1)},g=[];const b={props:["customer"],components:{CustomerDetailsComponentVue:v},data(){return{isComponentModalActive:!1,customerSelected:!1}}},i={};var y=n(b,f,g,!1,A,null,null,null);function A(e){for(let s in i)this[s]=i[s]}var x=function(){return y.exports}(),S=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container",attrs:{id:"pagination"}},[t("div",{staticClass:"prev p-10"},[t("b-button",{staticClass:"prev-btn",attrs:{disabled:e.page+1==1,"icon-right":"chevron-left"},on:{click:e.goPrev}})],1),t("div",{staticClass:"page p-10"},[e._v(" "+e._s(e.page+1)+" / "+e._s(e.total)+" ")]),t("div",{staticClass:"next p-10"},[t("b-button",{staticClass:"next-btn",attrs:{disabled:e.page+1>=e.total,"icon-right":"chevron-right"},on:{click:e.goNext}})],1)])},$=[];const E={props:["total","page"],data(){return{}},methods:{goNext(){this.$emit("goNext")},goPrev(){this.$emit("goPrev")}}},c={};var M=n(E,S,$,!1,k,null,null,null);function k(e){for(let s in c)this[s]=c[s]}var R=function(){return M.exports}(),w=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"alart-showing-modal-comp"},[t("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(e._s(e.title))]),t("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(o){return e.$emit("close")}}})]),t("section",{staticClass:"modal-card-body"},[t("p",[e._v(e._s(e.bodyText))])]),t("footer",{staticClass:"modal-card-foot"},[t("b-button",{staticClass:"close",attrs:{label:"\u3044\u3044\u3048"},on:{click:function(o){return e.$emit("close")}}}),t("b-button",{staticClass:"confirm",on:{click:function(o){return e.$emit("closeParent")}}},[t("span",{staticClass:"btn-txt"},[e._v("\u4E2D\u65AD\u3059\u308B")])])],1)])])},B=[];const F={props:["title","bodyText"]},l={};var T=n(F,w,B,!1,D,"57cd1f96",null,null);function D(e){for(let s in l)this[s]=l[s]}var m=function(){return T.exports}(),P=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"modal-card",staticStyle:{width:"auto"},attrs:{id:"research"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v("\u691C\u7D22\u30EF\u30FC\u30C9\u306E\u5909\u66F4")]),t("button",{staticClass:"delete",attrs:{type:"button"},on:{click:e.checkSearchCondition}})]),t("section",{staticClass:"modal-card-body",staticStyle:{padding:"20px"}},[t("b-field",[t("b-input",{attrs:{maxlength:"200",type:"textarea"},model:{value:e.orc_searched_text,callback:function(o){e.orc_searched_text=o},expression:"orc_searched_text"}})],1)],1),t("footer",{staticClass:"modal-card-foot"},[t("div",{staticClass:"buttons"},[t("b-button",{class:e.orc_searched_text?"btn-orange":"btn-gray",attrs:{disabled:!e.orc_searched_text,expanded:""},on:{click:e.searchAgain}},[e._v("\u518D\u691C\u7D22")])],1)]),t("b-modal",{attrs:{width:300,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-label":"Example Modal","close-button-aria-label":"Close",animation:"slide-fade-down","aria-modal":""},model:{value:e.isComponentModalActive,callback:function(o){e.isComponentModalActive=o},expression:"isComponentModalActive"}},[[t("alart-showing-model-component",{attrs:{title:e.modalTitleText,bodyText:e.modalBodyText},on:{closeParent:e.closeParent,close:e.close}})]],2)],1)},Q=[];const I={components:{AlartShowingModelComponent:m},data(){return{isComponentModalActive:!1,orc_searched_text:"",modalTitleText:"\u691C\u7D22\u30EF\u30FC\u30C9\u306E\u5909\u66F4",modalBodyText:"\u518D\u691C\u7D22\u3092\u4E2D\u65AD\u3057\u307E\u3059\u304B\uFF1F"}},mounted(){this.orc_searched_text=this.$store.state.customer.openSearchQuery.search},methods:{checkSearchCondition(){this.orc_searched_text!==this.$store.state.customer.openSearchQuery.search?this.isComponentModalActive=!0:this.closeParent()},searchAgain(){this.orc_searched_text&&this.$store.dispatch("customer/setOpenSearchQuery",{name:"search",value:this.orc_searched_text}),this.$emit("searchAgain")},close(){this.isComponentModalActive=!1},closeParent(){this.$emit("close")}}},d={};var N=n(I,P,Q,!1,L,"1a9c13cf",null,null);function L(e){for(let s in d)this[s]=d[s]}var U=function(){return N.exports}(),O=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"modal-card",staticStyle:{width:"auto"},attrs:{id:"ocr-search-condition"}},[t("header",{staticClass:"modal-card-head",staticStyle:{"padding-top":"40px"}},[t("p",{staticClass:"modal-card-title"},[e._v("\u691C\u7D22\u6761\u4EF6\u306E\u5909\u66F4")]),t("button",{staticClass:"delete",attrs:{type:"button"},on:{click:e.checkSearchCondition}})]),t("section",{staticClass:"modal-card-body",staticStyle:{padding:"0"}},[t("div",{staticClass:"img-div"},[t("img",{staticClass:"video",attrs:{id:"img_prev",src:e.$store.state.global.capturedImages.length>0?e.$store.state.global.capturedImages[0].image:""}}),e._l(e.ocrResponseElements,function(o,a){return t("div",{key:a,class:o.selected?"colored-shed":"gray-shed",style:{top:o.y1+"px",left:o.x1+"px",width:o.x2-o.x1+"px",height:o.y2-o.y1+"px"},on:{click:function(p){return e.getSelectedElement(o)}}})})],2),t("div",{staticStyle:{padding:"0px 20px 20px"}},[t("b-field",{attrs:{label:"\u691C\u7D22\u30AD\u30FC\u30EF\u30FC\u30C9"}},[t("b-input",{attrs:{maxlength:"200",type:"textarea"},model:{value:e.searchCondition.search,callback:function(o){e.$set(e.searchCondition,"search",o)},expression:"searchCondition.search"}})],1),t("b-checkbox",{class:e.searchCondition.corporation?"color-text":"",attrs:{"native-value":"true"},on:{input:e.getCorporationSearchCondition},model:{value:e.searchCondition.corporation,callback:function(o){e.$set(e.searchCondition,"corporation",o)},expression:"searchCondition.corporation"}},[e._v(" \u6CD5\u4EBA\u540D/\u5C4B\u53F7 ")]),t("br"),t("b-checkbox",{class:e.searchCondition.personal?"color-text":"",attrs:{"native-value":"true"},on:{input:e.getPersonalSearchCondition},model:{value:e.searchCondition.personal,callback:function(o){e.$set(e.searchCondition,"personal",o)},expression:"searchCondition.personal"}},[e._v(" \u500B\u4EBA\u540D ")]),t("br"),e.searchCondition.ContractStore?t("b-field",{attrs:{label:"\u62E0\u70B9"}},[t("b-select",{attrs:{expanded:""},model:{value:e.searchCondition.ContractStore,callback:function(o){e.$set(e.searchCondition,"ContractStore",o)},expression:"searchCondition.ContractStore"}},e._l(e.ContractStores,function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v(" "+e._s(o.name)+" ")])}),0)],1):e._e()],1)]),t("footer",{staticClass:"modal-card-foot"},[t("div",{staticClass:"buttons"},[t("b-button",{class:e.searchCondition.search?"btn-orange":"btn-gray",attrs:{disabled:!e.searchCondition.search||!this.searchCondition.personal&&!this.searchCondition.corporation,expanded:""},on:{click:e.searchAgain}},[e._v("\u3053\u306E\u6761\u4EF6\u3067\u63A2\u3059")])],1)]),t("b-modal",{attrs:{width:300,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-label":"Example Modal","close-button-aria-label":"Close",animation:"slide-fade-down","aria-modal":""},model:{value:e.isComponentModalActive,callback:function(o){e.isComponentModalActive=o},expression:"isComponentModalActive"}},[[t("alart-showing-model-component",{attrs:{title:e.modalTitleText,bodyText:e.modalBodyText},on:{closeParent:e.closeParent,close:e.close}})]],2)],1)},K=[];const Y={components:{camera:C,AlartShowingModelComponent:m},data(){return{ContractStores:[],searchCondition:{},ocrResponseElements:[],ocrResponseSelectedElements:[],isComponentModalActive:!1,modalTitleText:"\u691C\u7D22\u6761\u4EF6\u306E\u5909\u66F4",modalBodyText:"\u691C\u7D22\u6761\u4EF6\u306E\u5909\u66F4\u3092\u4E2D\u65AD\u3057\u307E\u3059\u304B\uFF1F",newlySelectedElement:[]}},mounted(){this.getSelectedContractStore()},methods:{getSelectedContractStore(){this.searchCondition={search:this.$store.state.customer.openSearchQuery.search,corporation:this.$store.state.customer.openSearchQuery.corporation===1,personal:this.$store.state.customer.openSearchQuery.personal===1,ContractStore:this.$store.state.customer.openSearchQuery.ContractStore},this.ContractStores=this.$store.state.global.ContractStores,this.ocrResponseElements=this.$store.state.customer.ocrResponseElements,this.ocrResponseSelectedElements=this.$store.state.customer.ocrResponseSelectedElements},getCorporationSearchCondition(){this.searchCondition.corporation?this.searchCondition.corporation=1:this.searchCondition.corporation=0},getPersonalSearchCondition(){this.searchCondition.personal?this.searchCondition.personal=1:this.searchCondition.personal=0},async getSelectedElement(e){let s=this.$store.state.customer.ocrResponseSelectedElements.find(o=>o.id===e.id);s?(s.selected=!1,e.selected=!1,await this.$store.state.customer.ocrResponseSelectedElements.splice(this.$store.state.customer.ocrResponseSelectedElements.indexOf(s),1),this.newlySelectedElement.length>0&&this.newlySelectedElement.splice(this.newlySelectedElement.indexOf(s),1)):(e.selected=!0,await this.$store.dispatch("customer/setOCRResponseSelectedElements",e),this.newlySelectedElement.push(e));let t="";this.$store.state.customer.ocrResponseSelectedElements.forEach(o=>{t+=" "+o.text}),this.searchCondition.search=t},generateImage(){let e=document.getElementById("img_prev");var s=document.createElement("canvas"),t=s.getContext("2d");s.setAttribute("width",500),s.setAttribute("height",500),t.drawImage(e,0,0,500,500),this.$store.state.customer.ocrResponseElements.forEach((a,p)=>{t.beginPath(),t.rect(a.x1/.828,a.y1/.828,a.x2/.828-a.x1/.828,a.y2/.828-a.y1/.828),a.selected?(t.fillStyle="rgba(14, 177, 232, 0.4)",t.fill(),t.strokeStyle="#0EB1E8",t.stroke()):(t.fillStyle="rgba(255, 255, 255, 0.2)",t.fill(),t.strokeStyle="#fff",t.stroke())});let o=s.toDataURL("image/jpeg");this.$store.dispatch("customer/setBoundingBoxImage",o)},checkSearchCondition(){this.searchCondition.search!=this.$store.state.customer.openSearchQuery.search||this.searchCondition.corporation!=this.$store.state.customer.openSearchQuery.corporation||this.searchCondition.personal!=this.$store.state.customer.openSearchQuery.personal||this.searchCondition.ContractStore!=this.$store.state.customer.openSearchQuery.ContractStore?this.isComponentModalActive=!0:this.closeParent()},close(){this.isComponentModalActive=!1},closeParent(){this.newlySelectedElement.length>0&&this.newlySelectedElement.forEach(e=>{let s=this.$store.state.customer.ocrResponseElements.find(t=>t.id===e.id);s&&(s.selected=!1)}),this.$emit("close")},searchAgain(){this.searchCondition.search&&(this.generateImage(),this.$store.dispatch("customer/setOpenSearchQuery",{name:"search",value:this.searchCondition.search})),this.$store.dispatch("customer/setOpenSearchQuery",{name:"corporation",value:this.searchCondition.corporation?1:0}),this.$store.dispatch("customer/setOpenSearchQuery",{name:"personal",value:this.searchCondition.personal?1:0}),this.searchCondition.ContractStore&&this.$store.dispatch("customer/setOpenSearchQuery",{name:"ContractStore",value:this.searchCondition.ContractStore}),!this.searchCondition.personal&&!this.searchCondition.corporation?(this.isComponentModalActive=!1,r("\u691C\u7D22\u5BFE\u8C61\u3092\u5C11\u306A\u304F\u3068\u30821\u3064\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044","is-danger")):this.$emit("searchAgain")}}},h={};var V=n(Y,O,K,!1,W,"11059bec",null,null);function W(e){for(let s in h)this[s]=h[s]}var j=function(){return V.exports}(),H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD2SURBVHgB7ZS7DcIwEIb/s5BooUFENGED2AAKHi0TMAKMAhvAFiCKhA0yghtEoEqDFApynAveAYUkouJrfLZPn6zTnWnfs0YMaiADiqELDIwBtpGBiKAVciI/UUQ8R1bEQWbdda0ZCEOkQGo8rS63Y7oc+D3LkU0LX0Bgt7L02ya+1qh4LA5E7yE5+nAMB5fNVVR2dRApNhc6iURq2667QXB73RPbftVWTI6E9ieJtfD1/SHFZe47tQYocphQekhmBCfFzWeJIbaPKquNJ936Wi9iL07yVpSGv+iHokKSJDNTJ8I6DMPJ1yKWr0Emey3h7F3v3HMGmYpX3uZAIY0AAAAASUVORK5CYII=",J=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"ocr_search_result"}},[t("head-component",{attrs:{backBtnTxt:e.backBtnTxt,title:"\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",prevPage:"/capture-ocr-image"}}),t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"input-field"},[t("b-field",[t("b-input",{attrs:{placeholder:"ID\u3092\u5165\u529B\u3057\u3066\u691C\u7D22",icon:"magnify"},on:{focus:e.openModal},model:{value:e.$store.state.customer.openSearchQuery.search,callback:function(o){e.$set(e.$store.state.customer.openSearchQuery,"search",o)},expression:"$store.state.customer.openSearchQuery.search"}})],1)],1),t("div",{staticClass:"search"},[e.showWithdrawal?t("div",{staticClass:"swtich"},[t("span",{class:e.DeleteFlag?"color-text":"gray-text"},[e._v("\u9000\u4F1A\u8005\u3092\u542B\u3080")]),t("b-field",[t("b-switch",{attrs:{type:"is-danger"},on:{input:e.filterByDeleteFlag},model:{value:e.DeleteFlag,callback:function(o){e.DeleteFlag=o},expression:"DeleteFlag"}})],1)],1):e._e()])]),t("div",{staticClass:"customers container-fluid"},[e.totalCustomers.length>0?t("div",{staticClass:"customers-list"},e._l(e.customers[e.page],function(o,a){return t("div",{key:a},[t("customer-list-component-two",{attrs:{customer:o}})],1)}),0):t("div",{staticClass:"not-found"},[t("p",{staticClass:"not-found-text"},[e._v(" [ "+e._s(e.$store.state.customer.openSearchQuery.search)+" ] "),t("br"),e._v(" \u306F \u307F\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F ")])])]),t("div",{staticClass:"container-fluid",attrs:{id:"pagination-div"}},[e.totalCustomers.length>0?t("pagination-component",{attrs:{page:e.page,total:e.total},on:{goNext:e.goNext,goPrev:e.goPrev}}):e._e()],1),t("div",{staticClass:"footer"},[t("div",{staticClass:"buttons"},[t("b-button",{staticClass:"btn-filter",attrs:{expanded:""},on:{click:function(o){e.isConditionChangeModalActive=!0}}},[t("img",{attrs:{src:H,alt:"icon"}}),t("span",[e._v("\u691C\u7D22\u6761\u4EF6\u306E\u5909\u66F4 - "+e._s(e.totalCustomers.length)+"\u4EF6")])])],1)]),t("b-loading",{attrs:{"is-full-page":e.isFullPage,"can-cancel":!1},model:{value:e.isLoading,callback:function(o){e.isLoading=o},expression:"isLoading"}}),t("b-modal",{attrs:{"has-modal-card":"","full-screen":"","close-button-aria-label":"Close","can-cancel":!0,animation:"slide-fade-down"},model:{value:e.isComponentModalActive,callback:function(o){e.isComponentModalActive=o},expression:"isComponentModalActive"}},[t("re-search-modal-component",{on:{searchAgain:e.searchAgain,close:e.close}})],1),t("b-modal",{attrs:{"has-modal-card":"","full-screen":"","close-button-aria-label":"Close","can-cancel":!0,animation:"slide-fade-down"},model:{value:e.isConditionChangeModalActive,callback:function(o){e.isConditionChangeModalActive=o},expression:"isConditionChangeModalActive"}},[t("ocr-search-condition-change-component",{on:{searchAgain:e.searchAgain,close:e.close}})],1)],1)},q=[];const G={components:{HeadComponent:_,CustomerListComponentTwo:x,PaginationComponent:R,ReSearchModalComponent:U,OcrSearchConditionChangeComponent:j},data(){return{isSearched:!1,DeleteFlag:!1,showWithdrawal:!0,radioButton:"",totalCustomers:[],backBtnTxt:"\u518D\u64AE\u5F71",isFullPage:!0,isLoading:!1,searched_id:"",isComponentModalActive:!1,isConditionChangeModalActive:!1,total:0,customers:[],ocrResponse:[],page:0,perPage:5,topFiveCustomers:[]}},mounted(){this.ocrResponse=this.$store.state.customer.ocrSearchResults,this.filterByDeleteFlag()},methods:{createChunk(){let e=this.totalCustomers,s=[],t=this.perPage;e.length>0&&(Array.from({length:Math.ceil(e.length/t)},(o,a)=>{s.push(e.slice(a*t,a*t+t))}),this.total=s.length),this.customers=s},goNext(){this.page+=1},goPrev(){this.page-=1},async searchAgain(){this.$store.state.customer.openSearchQuery.search&&(this.isLoading=!0,await this.$store.dispatch("customer/getCustomersByOpenSearch").then(e=>{this.isLoading=!1,e.length>0?(this.ocrResponse=e,this.filterByDeleteFlag(),this.getTopFiveCustomers(),this.close()):(this.ocrResponse=e,this.filterByDeleteFlag(),this.close(),r("\u8A8D\u8B58\u6587\u5B57\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u518D\u5EA6\u8A66\u3059\u304B\u691C\u7D22\u6587\u5B57\u3092\u5165\u529B\u304F\u3060\u3055\u3044\u3002","is-danger"))}).catch(e=>{this.close(),this.isLoading=!1,r("\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u518D\u5EA6\u8A66\u3059\u304B\u691C\u7D22\u6587\u5B57\u3092\u5165\u529B\u304F\u3060\u3055\u3044\u3002","is-danger")}))},filterByDeleteFlag(){if(this.page=0,this.DeleteFlag){let e=this.ocrResponse.filter(s=>s.DeleteFlag===1||s.DeleteFlag===0);this.totalCustomers=e,this.createChunk()}else{let e=this.ocrResponse.filter(s=>s.DeleteFlag===0);this.totalCustomers=e,this.createChunk()}},getTopFiveCustomers(){let e=[];for(let s=0;s<5;s++)this.ocrResponse[s]&&e.push(this.ocrResponse[s]);this.$store.dispatch("customer/setTopFiveCustomers",e)},openModal(){this.isComponentModalActive=!0},close(){this.isComponentModalActive=!1,this.isConditionChangeModalActive=!1}}},u={};var X=n(G,J,q,!1,Z,"608153f8",null,null);function Z(e){for(let s in u)this[s]=u[s]}var oe=function(){return X.exports}();export{oe as default};
